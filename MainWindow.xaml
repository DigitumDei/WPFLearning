<dragablz:DragablzWindow x:Class="WPFLearning.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:local="clr-namespace:WPFLearning"
                 xmlns:vm="clr-namespace:WPFLearning.ViewModels"
                 xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
                 xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
                 xmlns:dragablz="http://dragablz.net/winfx/xaml/dragablz"                         
                 xmlns:dockablz="http://dragablz.net/winfx/xaml/dockablz"
                 mc:Ignorable="d"
                 Title="Tabbed Browser" Height="450" Width="800">

    <dragablz:DragablzWindow.DataContext>
        <vm:MainViewModel/>
    </dragablz:DragablzWindow.DataContext>
    <DockPanel>
        <dragablz:TabablzControl x:Name="TabControl"
                                 ItemsSource="{Binding Tabs}" 
                                 SelectedItem="{Binding SelectedTab}"
                                 HeaderMemberPath="Title"
                                 ItemContainerStyle="{StaticResource CustomTabItemStyle}"
                                 ShowDefaultAddButton="True"
                                 DockPanel.Dock="Top"
                                 ClosingItemCallback="{Binding ClosingTabItemHandler}"
                                 NewItemFactory="{Binding NewItemFactory}">

            <dragablz:TabablzControl.InterTabController>
                <dragablz:InterTabController InterTabClient="{Binding}" />
            </dragablz:TabablzControl.InterTabController>
            <dragablz:TabablzControl.ContentTemplate>
                <DataTemplate>
                    <DockPanel>
                        <StackPanel DockPanel.Dock="Top">
                            <TextBox Text="{Binding Address, UpdateSourceTrigger=PropertyChanged}"
                                 KeyDown="AddressBar_KeyDown" 
                                 Margin="5"/>

                            <ListBox Visibility="{Binding ShowSuggestion, Converter={StaticResource BooleanToVisibilityConverter}}"
                                     MouseLeftButtonUp="SuggestionList_MouseLeftButtonUp"
                                     Margin="5,0,5,5"
                                     MaxHeight="200">
                                <ListBoxItem Content="{Binding DuckDuckGoSuggestion}"/>
                            </ListBox>
                        </StackPanel>

                        <wv2:WebView2 Source="{Binding Source, Mode=TwoWay}" NavigationCompleted="WebView_NavigationCompleted"/>
                    </DockPanel>
                </DataTemplate>
            </dragablz:TabablzControl.ContentTemplate>
        </dragablz:TabablzControl>
    </DockPanel>
</dragablz:DragablzWindow>
